<div
  class="bottom-0 left-0 w-full bg-white shadow-lg p-4 sm:static sm:w-80 sm:ml-auto sm:mt-10 border border-gray-200 rounded-xl"
>
  <h2 class="text-2xl font-semibold mb-4">Carrito</h2>

  @let error = cart.error$ | async; @if (error) {
  <div class="text-red-500 mb-2">
    {{ error }}
  </div>
  } @for (item of cart.getItems(); track $index) {
  <div class="flex justify-between py-1 border-b">
    <span>{{ item.name }}</span>
    <span>{{ item.price | currency }}</span>
  </div>
  }

  <div class="mt-4">
    <p class="text-gray-600">Subtotal: {{ total | currency }}</p>
    @if (discountPercent > 0) {
    <p class="text-gray-600">Descuento: {{ discountPercent * 100 }}%</p>
    }
    <p class="font-bold text-lg mt-2">Total: {{ finalPrice | currency }}</p>
  </div>

  <input
    [(ngModel)]="customer"
    type="text"
    placeholder="Nombre cliente"
    class="w-full border border-gray-300 rounded-lg px-3 py-2 mt-4"
  />

  @if (showErrors() && !customer()) {
  <div class="text-red-500 text-sm mt-1">El nombre del cliente es requerido.</div>
  }

  <button
    (click)="submitOrder()"
    class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 w-full mt-3"
  >
    Enviar Orden
  </button>

  @if (showErrors() && !cart.getItems().length) {
  <div class="text-red-600 text-sm mt-1">Debes agregar al menos un producto al carrito.</div>
  }
</div>
